\doxysection{Referencia del archivo src/sensores.cpp}
\hypertarget{sensores_8cpp}{}\label{sensores_8cpp}\index{src/sensores.cpp@{src/sensores.cpp}}


Implementación de la lectura y configuración de los sensores QTR-\/8A.  


{\ttfamily \#include "{}sensores.\+hpp"{}}\newline
{\ttfamily \#include "{}QTRSensors.\+h"{}}\newline
{\ttfamily \#include "{}config.\+hpp"{}}\newline
{\ttfamily \#include "{}motores.\+hpp"{}}\newline
{\ttfamily \#include "{}buzzer.\+hpp"{}}\newline
\doxysubsubsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sensores_8cpp_ac6a9d020ad6205bf3a5890d2dc4df0e5}{setup\+Sensores}} ()
\begin{DoxyCompactList}\small\item\em Configura el tipo de sensor y los pines asociados. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sensores_8cpp_a087f5f49fa452708bb142e6af46d4b94}{calibrar\+Sensores}} ()
\begin{DoxyCompactList}\small\item\em Ejecuta la rutina de calibración de los sensores. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sensores_8cpp_a739ecba438965ecfcd4cea298b08d2ca}{leer\+Linea}} ()
\begin{DoxyCompactList}\small\item\em Obtiene la posición relativa del robot respecto a la línea. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \mbox{\hyperlink{sensores_8cpp_a6f14bde43ef12199f2d2ef07adb6c942}{position}}
\begin{DoxyCompactList}\small\item\em Variable global que almacena la última posición calculada de la línea. \end{DoxyCompactList}\item 
\mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d}{Linea}} \mbox{\hyperlink{sensores_8cpp_ad41c7e6046107ea067785fa523ddab36}{linea\+\_\+competencia}} = \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66da637182e28b9d39bb102f3309c827c1e7}{BLANCA}}
\begin{DoxyCompactList}\small\item\em Configuración global para pista con línea blanca sobre fondo negro. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Implementación de la lectura y configuración de los sensores QTR-\/8A. 

Maneja el objeto de la librería QTRSensors, el proceso de calibración inicial y la lógica de detección de posición según el color de la línea de competencia. \begin{DoxyAuthor}{Autor}
Legion de Ohm 
\end{DoxyAuthor}


\label{doc-func-members}
\Hypertarget{sensores_8cpp_doc-func-members}
\doxysubsection{Documentación de funciones}
\Hypertarget{sensores_8cpp_a087f5f49fa452708bb142e6af46d4b94}\index{sensores.cpp@{sensores.cpp}!calibrarSensores@{calibrarSensores}}
\index{calibrarSensores@{calibrarSensores}!sensores.cpp@{sensores.cpp}}
\doxysubsubsection{\texorpdfstring{calibrarSensores()}{calibrarSensores()}}
{\footnotesize\ttfamily \label{sensores_8cpp_a087f5f49fa452708bb142e6af46d4b94} 
void calibrar\+Sensores (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Ejecuta la rutina de calibración de los sensores. 

Rutina de calibración de los sensores para adaptarse a las condiciones de la pista. Ejecuta un ciclo de calibración (ej. 2.\+5 segundos) para determinar los valores mínimo y máximo de blanco y negro, crucial para la lectura precisa de la línea.

Realiza 300 muestras de lectura para determinar los umbrales de blanco y negro. Proporciona feedback sonoro (buzzer) y visual (LED) durante el proceso. \Hypertarget{sensores_8cpp_a739ecba438965ecfcd4cea298b08d2ca}\index{sensores.cpp@{sensores.cpp}!leerLinea@{leerLinea}}
\index{leerLinea@{leerLinea}!sensores.cpp@{sensores.cpp}}
\doxysubsubsection{\texorpdfstring{leerLinea()}{leerLinea()}}
{\footnotesize\ttfamily \label{sensores_8cpp_a739ecba438965ecfcd4cea298b08d2ca} 
uint16\+\_\+t leer\+Linea (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Obtiene la posición relativa del robot respecto a la línea. 

Lee los sensores y calcula la posición ponderada de la línea. Utiliza la función {\ttfamily read\+Line()} de la librería QTR para devolver un valor normalizado que indica el desplazamiento lateral respecto al centro del array.

Selecciona entre read\+Line\+White o read\+Line\+Black según la variable linea\+\_\+competencia. \begin{DoxyReturn}{Devuelve}
uint16\+\_\+t Valor normalizado entre 0 y 7000. 
\end{DoxyReturn}
\Hypertarget{sensores_8cpp_ac6a9d020ad6205bf3a5890d2dc4df0e5}\index{sensores.cpp@{sensores.cpp}!setupSensores@{setupSensores}}
\index{setupSensores@{setupSensores}!sensores.cpp@{sensores.cpp}}
\doxysubsubsection{\texorpdfstring{setupSensores()}{setupSensores()}}
{\footnotesize\ttfamily \label{sensores_8cpp_ac6a9d020ad6205bf3a5890d2dc4df0e5} 
void setup\+Sensores (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Configura el tipo de sensor y los pines asociados. 

Inicializa el objeto QTRSensors con los pines de entrada/salida.

Establece el modo de lectura analógica y llama a la rutina de calibración. 

\label{doc-var-members}
\Hypertarget{sensores_8cpp_doc-var-members}
\doxysubsection{Documentación de variables}
\Hypertarget{sensores_8cpp_ad41c7e6046107ea067785fa523ddab36}\index{sensores.cpp@{sensores.cpp}!linea\_competencia@{linea\_competencia}}
\index{linea\_competencia@{linea\_competencia}!sensores.cpp@{sensores.cpp}}
\doxysubsubsection{\texorpdfstring{linea\_competencia}{linea\_competencia}}
{\footnotesize\ttfamily \label{sensores_8cpp_ad41c7e6046107ea067785fa523ddab36} 
\mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d}{Linea}} linea\+\_\+competencia = \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66da637182e28b9d39bb102f3309c827c1e7}{BLANCA}}}



Configuración global para pista con línea blanca sobre fondo negro. 

\Hypertarget{sensores_8cpp_a6f14bde43ef12199f2d2ef07adb6c942}\index{sensores.cpp@{sensores.cpp}!position@{position}}
\index{position@{position}!sensores.cpp@{sensores.cpp}}
\doxysubsubsection{\texorpdfstring{position}{position}}
{\footnotesize\ttfamily \label{sensores_8cpp_a6f14bde43ef12199f2d2ef07adb6c942} 
uint16\+\_\+t position}



Variable global que almacena la última posición calculada de la línea. 

Posición calculada de la línea. Es el valor de la salida del proceso (PV), usado como entrada para el controlador PID. Este valor se normaliza (ej. 0 a 4000) donde el centro es el punto de referencia ({\ttfamily \doxylink{pid_8hpp_a8b6f34837979e0ebe80423697c0250f8}{setpoint}}). 