\doxysection{Referencia del archivo include/sensores.hpp}
\hypertarget{sensores_8hpp}{}\label{sensores_8hpp}\index{include/sensores.hpp@{include/sensores.hpp}}


Cabecera para la configuración, calibración y lectura del array de sensores QTR. Contiene la definición del tipo de línea a seguir, la instancia del objeto QTR y las funciones para obtener la posición central de la línea.  


{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include "{}QTRSensors.\+h"{}}\newline
{\ttfamily \#include "{}buzzer.\+hpp"{}}\newline
\doxysubsubsection*{Enumeraciones}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d}{Linea}} \{ \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66da637182e28b9d39bb102f3309c827c1e7}{BLANCA}}
, \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66dac4f59a0066d6178a05185e2041f74571}{NEGRA}}
 \}
\begin{DoxyCompactList}\small\item\em Define el modo de operación del seguidor de línea\+: Indica si el robot debe buscar la línea oscura (NEGRA) o la línea clara (BLANCA). Este valor se configura globalmente en {\ttfamily \doxylink{config_8cpp}{config.\+cpp}} mediante la bandera {\ttfamily LINEA\+\_\+\+NEGRA}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sensores_8hpp_a2f219266814710460b32105d03655688}{setup\+Sensores}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{main_8cpp_a60839c64d95207d4b55d0e6ddb9d9d1f}{sensor\+Pins}}, uint8\+\_\+t \mbox{\hyperlink{sensores_8hpp_a3ac4073d185617435faaca724a413fec}{Sensor\+Count}})
\begin{DoxyCompactList}\small\item\em Inicializa el objeto QTRSensors con los pines de entrada/salida. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sensores_8hpp_a087f5f49fa452708bb142e6af46d4b94}{calibrar\+Sensores}} ()
\begin{DoxyCompactList}\small\item\em Rutina de calibración de los sensores para adaptarse a las condiciones de la pista. Ejecuta un ciclo de calibración (ej. 2.\+5 segundos) para determinar los valores mínimo y máximo de blanco y negro, crucial para la lectura precisa de la línea. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sensores_8hpp_a739ecba438965ecfcd4cea298b08d2ca}{leer\+Linea}} ()
\begin{DoxyCompactList}\small\item\em Lee los sensores y calcula la posición ponderada de la línea. Utiliza la función {\ttfamily read\+Line()} de la librería QTR para devolver un valor normalizado que indica el desplazamiento lateral respecto al centro del array. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
QTRSensors \mbox{\hyperlink{sensores_8hpp_a9e05607474a03ba0b5bd2ee27c003524}{qtr}}
\begin{DoxyCompactList}\small\item\em Objeto principal de la librería QTRSensors para interactuar con el array de sensores. \end{DoxyCompactList}\item 
const uint8\+\_\+t \mbox{\hyperlink{sensores_8hpp_a3ac4073d185617435faaca724a413fec}{Sensor\+Count}}
\begin{DoxyCompactList}\small\item\em Número de sensores infrarrojos utilizados en el array QTR. Este valor es crucial para el tamaño de los arrays de lectura y para las funciones de calibración. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sensores_8hpp_a997c373dc8e57c8d7edc5672ea97bc3f}{sensor\+Values}} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em Array que almacena las lecturas de los sensores (0-\/1023 o 0-\/4095, dependiendo de la configuración). El tamaño de este array está definido por {\ttfamily \doxylink{sensores_8hpp_a3ac4073d185617435faaca724a413fec}{Sensor\+Count}}. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{sensores_8hpp_a6f14bde43ef12199f2d2ef07adb6c942}{position}}
\begin{DoxyCompactList}\small\item\em Posición calculada de la línea. Es el valor de la salida del proceso (PV), usado como entrada para el controlador PID. Este valor se normaliza (ej. 0 a 4000) donde el centro es el punto de referencia ({\ttfamily \doxylink{pid_8hpp_a8b6f34837979e0ebe80423697c0250f8}{setpoint}}). \end{DoxyCompactList}\item 
const uint8\+\_\+t \mbox{\hyperlink{sensores_8hpp_ab94a044ae6bf552465ae9ccfb9b27c04}{led\+Calibracion}}
\begin{DoxyCompactList}\small\item\em Pin GPIO conectado al LED que indica el estado de calibración. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_buzzer}{Buzzer}} \mbox{\hyperlink{sensores_8hpp_ab09674ce6646dd45db889c40607a500a}{buzzer}}
\begin{DoxyCompactList}\small\item\em Instancia global del objeto \doxylink{class_buzzer}{Buzzer}, usado para emitir tonos durante la calibración o estados. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Cabecera para la configuración, calibración y lectura del array de sensores QTR. Contiene la definición del tipo de línea a seguir, la instancia del objeto QTR y las funciones para obtener la posición central de la línea. 

\begin{DoxyAuthor}{Autor}
Legion de Ohm 
\end{DoxyAuthor}


\label{doc-enum-members}
\Hypertarget{sensores_8hpp_doc-enum-members}
\doxysubsection{Documentación de enumeraciones}
\Hypertarget{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d}\index{sensores.hpp@{sensores.hpp}!Linea@{Linea}}
\index{Linea@{Linea}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{Linea}{Linea}}
{\footnotesize\ttfamily \label{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d} 
enum \mbox{\hyperlink{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66d}{Linea}}}



Define el modo de operación del seguidor de línea\+: Indica si el robot debe buscar la línea oscura (NEGRA) o la línea clara (BLANCA). Este valor se configura globalmente en {\ttfamily \doxylink{config_8cpp}{config.\+cpp}} mediante la bandera {\ttfamily LINEA\+\_\+\+NEGRA}. 

\begin{DoxyEnumFields}[2]{Valores de enumeraciones}
\raisebox{\heightof{T}}[0pt][0pt]{\index{BLANCA@{BLANCA}!sensores.hpp@{sensores.hpp}}\index{sensores.hpp@{sensores.hpp}!BLANCA@{BLANCA}}}\Hypertarget{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66da637182e28b9d39bb102f3309c827c1e7}\label{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66da637182e28b9d39bb102f3309c827c1e7} 
BLANCA&El robot sigue la línea blanca sobre fondo negro (valores altos = sobre línea). \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NEGRA@{NEGRA}!sensores.hpp@{sensores.hpp}}\index{sensores.hpp@{sensores.hpp}!NEGRA@{NEGRA}}}\Hypertarget{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66dac4f59a0066d6178a05185e2041f74571}\label{sensores_8hpp_aa9b6c9070c996b54591a9d0fdf86e66dac4f59a0066d6178a05185e2041f74571} 
NEGRA&El robot sigue la línea negra sobre fondo blanco (valores bajos = sobre línea). \\
\hline

\end{DoxyEnumFields}


\label{doc-func-members}
\Hypertarget{sensores_8hpp_doc-func-members}
\doxysubsection{Documentación de funciones}
\Hypertarget{sensores_8hpp_a087f5f49fa452708bb142e6af46d4b94}\index{sensores.hpp@{sensores.hpp}!calibrarSensores@{calibrarSensores}}
\index{calibrarSensores@{calibrarSensores}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{calibrarSensores()}{calibrarSensores()}}
{\footnotesize\ttfamily \label{sensores_8hpp_a087f5f49fa452708bb142e6af46d4b94} 
void calibrar\+Sensores (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Rutina de calibración de los sensores para adaptarse a las condiciones de la pista. Ejecuta un ciclo de calibración (ej. 2.\+5 segundos) para determinar los valores mínimo y máximo de blanco y negro, crucial para la lectura precisa de la línea. 

\begin{DoxyReturn}{Devuelve}
void
\end{DoxyReturn}
Rutina de calibración de los sensores para adaptarse a las condiciones de la pista. Ejecuta un ciclo de calibración (ej. 2.\+5 segundos) para determinar los valores mínimo y máximo de blanco y negro, crucial para la lectura precisa de la línea.

\begin{DoxyReturn}{Devuelve}
void 
\end{DoxyReturn}
\Hypertarget{sensores_8hpp_a739ecba438965ecfcd4cea298b08d2ca}\index{sensores.hpp@{sensores.hpp}!leerLinea@{leerLinea}}
\index{leerLinea@{leerLinea}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{leerLinea()}{leerLinea()}}
{\footnotesize\ttfamily \label{sensores_8hpp_a739ecba438965ecfcd4cea298b08d2ca} 
uint16\+\_\+t leer\+Linea (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Lee los sensores y calcula la posición ponderada de la línea. Utiliza la función {\ttfamily read\+Line()} de la librería QTR para devolver un valor normalizado que indica el desplazamiento lateral respecto al centro del array. 

\begin{DoxyReturn}{Devuelve}
uint16\+\_\+t Posición calculada de la línea (ej. 0 a 4000).
\end{DoxyReturn}
Lee los sensores y calcula la posición ponderada de la línea. Utiliza la función {\ttfamily read\+Line()} de la librería QTR para devolver un valor normalizado que indica el desplazamiento lateral respecto al centro del array.

\begin{DoxyReturn}{Devuelve}
uint16\+\_\+t La posición ponderada de la línea. (Ej. 0 a 4000). 
\end{DoxyReturn}
\Hypertarget{sensores_8hpp_a2f219266814710460b32105d03655688}\index{sensores.hpp@{sensores.hpp}!setupSensores@{setupSensores}}
\index{setupSensores@{setupSensores}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{setupSensores()}{setupSensores()}}
{\footnotesize\ttfamily \label{sensores_8hpp_a2f219266814710460b32105d03655688} 
void setup\+Sensores (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{sensor\+Pins}{, }\item[{uint8\+\_\+t}]{Sensor\+Count}{}\end{DoxyParamCaption})}



Inicializa el objeto QTRSensors con los pines de entrada/salida. 


\begin{DoxyParams}{Parámetros}
{\em sensor\+Pins} & Array que contiene los pines GPIO a los que están conectados los sensores. \\
\hline
{\em Sensor\+Count} & Número total de sensores a inicializar. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
void
\end{DoxyReturn}
Inicializa el objeto QTRSensors con los pines de entrada/salida.


\begin{DoxyParams}{Parámetros}
{\em sensor\+Pins} & Array que contiene los pines GPIO a los que están conectados los sensores. \\
\hline
{\em Sensor\+Count} & Número total de sensores a inicializar. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
void 
\end{DoxyReturn}


\label{doc-var-members}
\Hypertarget{sensores_8hpp_doc-var-members}
\doxysubsection{Documentación de variables}
\Hypertarget{sensores_8hpp_ab09674ce6646dd45db889c40607a500a}\index{sensores.hpp@{sensores.hpp}!buzzer@{buzzer}}
\index{buzzer@{buzzer}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{buzzer}{buzzer}}
{\footnotesize\ttfamily \label{sensores_8hpp_ab09674ce6646dd45db889c40607a500a} 
\mbox{\hyperlink{class_buzzer}{Buzzer}} buzzer\hspace{0.3cm}{\ttfamily [extern]}}



Instancia global del objeto \doxylink{class_buzzer}{Buzzer}, usado para emitir tonos durante la calibración o estados. 

\Hypertarget{sensores_8hpp_ab94a044ae6bf552465ae9ccfb9b27c04}\index{sensores.hpp@{sensores.hpp}!ledCalibracion@{ledCalibracion}}
\index{ledCalibracion@{ledCalibracion}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{ledCalibracion}{ledCalibracion}}
{\footnotesize\ttfamily \label{sensores_8hpp_ab94a044ae6bf552465ae9ccfb9b27c04} 
const uint8\+\_\+t led\+Calibracion\hspace{0.3cm}{\ttfamily [extern]}}



Pin GPIO conectado al LED que indica el estado de calibración. 

\Hypertarget{sensores_8hpp_a6f14bde43ef12199f2d2ef07adb6c942}\index{sensores.hpp@{sensores.hpp}!position@{position}}
\index{position@{position}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{position}{position}}
{\footnotesize\ttfamily \label{sensores_8hpp_a6f14bde43ef12199f2d2ef07adb6c942} 
uint16\+\_\+t position\hspace{0.3cm}{\ttfamily [extern]}}



Posición calculada de la línea. Es el valor de la salida del proceso (PV), usado como entrada para el controlador PID. Este valor se normaliza (ej. 0 a 4000) donde el centro es el punto de referencia ({\ttfamily \doxylink{pid_8hpp_a8b6f34837979e0ebe80423697c0250f8}{setpoint}}). 

\Hypertarget{sensores_8hpp_a9e05607474a03ba0b5bd2ee27c003524}\index{sensores.hpp@{sensores.hpp}!qtr@{qtr}}
\index{qtr@{qtr}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{qtr}{qtr}}
{\footnotesize\ttfamily \label{sensores_8hpp_a9e05607474a03ba0b5bd2ee27c003524} 
QTRSensors qtr\hspace{0.3cm}{\ttfamily [extern]}}



Objeto principal de la librería QTRSensors para interactuar con el array de sensores. 

\Hypertarget{sensores_8hpp_a3ac4073d185617435faaca724a413fec}\index{sensores.hpp@{sensores.hpp}!SensorCount@{SensorCount}}
\index{SensorCount@{SensorCount}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{SensorCount}{SensorCount}}
{\footnotesize\ttfamily \label{sensores_8hpp_a3ac4073d185617435faaca724a413fec} 
const uint8\+\_\+t Sensor\+Count\hspace{0.3cm}{\ttfamily [extern]}}



Número de sensores infrarrojos utilizados en el array QTR. Este valor es crucial para el tamaño de los arrays de lectura y para las funciones de calibración. 

\Hypertarget{sensores_8hpp_a997c373dc8e57c8d7edc5672ea97bc3f}\index{sensores.hpp@{sensores.hpp}!sensorValues@{sensorValues}}
\index{sensorValues@{sensorValues}!sensores.hpp@{sensores.hpp}}
\doxysubsubsection{\texorpdfstring{sensorValues}{sensorValues}}
{\footnotesize\ttfamily \label{sensores_8hpp_a997c373dc8e57c8d7edc5672ea97bc3f} 
uint16\+\_\+t sensor\+Values\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [extern]}}



Array que almacena las lecturas de los sensores (0-\/1023 o 0-\/4095, dependiendo de la configuración). El tamaño de este array está definido por {\ttfamily \doxylink{sensores_8hpp_a3ac4073d185617435faaca724a413fec}{Sensor\+Count}}. 

